
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66232368-1', 'auto');
  ga('send', 'pageview');
  
  $('body').scrollspy({
    target: '.bs-docs-sidebar',
    offset: 40
 });

</script>
<title>Docs</title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="/assets/bootstrap_min_css.css">



    <!-- Custom styles for this template -->
    <link href="/assets/offcanvas.css" rel="stylesheet">
	    <link href="/assets/docsmin.css" rel="stylesheet">
    <!-- Custom styles for this template -->
	<link href="/assets/mods.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="/assets/html5shiv.min.js"></script>
      <script src="/assets/respond.min.js"></script>
    <![endif]-->
  </head>

  <body data-twttr-rendered="true">
  <nav class="navbar navbar-fixed-top navbar-inverse navfront" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            
            <li  ><a href="../../">
            CommonWealth Robotics</a></li>
            
            
            <li  ><a href="../../tutorials/">
            Tutorials</a></li>
            
            
          </ul>
        </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
    </nav><!-- /.navbar -->
  <div class="container bs-docs-container">
    <div class="row">

            <!-- menu -->
        <div class="col-sm-3">
        
            <div class="bs-docs-sidebar hidden-print affix-top">
            	
                <a href="../Overview/" class="btn btn-default navbtn pull-left btn-sm" aria-label="Left Align">
				<span  aria-hidden="true"></span>
				Previous
			</a>

            
			<a href="../RPCs-and-Namespaces/" class="btn btn-default navbtn btn-sm" aria-label="Right Align">
				Next
				<span  aria-hidden="true"></span>
				
				
			</a><br>
               <ul class="nav bs-docs-sidenav active" data-spy="active" data-offset-top="25" data-offset-bottom="20">
                <li><strong>Bowler Protocol</strong><hr class="menuhr" /></li>
                
                    <li  >
                         <a href="../Overview/">Overview</a></li>
                    
                
                    <li class="active" >
                         <a href="./">Packet Format</a></li>
                    
                
                    <li  >
                         <a href="../RPCs-and-Namespaces/">RPCs and Namespaces</a></li>
                    
                
                    <li  >
                         <a href="../DyIO/">A look at the DyIO</a></li>
                    
                
                    <li  >
                         <a href="../BowlerBoard/">A look at the BowlerBoard</a></li>
                    
                
                    <li  >
                         <a href="../IO-Namespace/">com.bcs.io Namespace</a></li>
                    
                
                    <li  >
                         <a href="../PID-Namespace/">com.bcs.PID namespace</a></li>
                    
                      
                </ul> <!-- nav bs-docs-sidenav -->
                
            </div> <!-- bs-docs-sidebar -->
        </div> <!-- col-md-3 -->
            <!-- page content -->
        <div class="col-sm-9" role="main">
            <div class="bs-docs-section">
                
## Packet Format ##

|     Size       |      Name                       |        Description      |
|----------------|---------------------------------|-------------------------|
| 1b             | Protocol Revision               | The revision of the Bowler protocol to use |
| 6b             | Target Device ID                | The IEEE OUI-48 MAC address of the recipient device |
| 1b             | Packet Type                     | Metadata pertaining to how the packet will affect device state. |
| 1bit           | Direction Flag                  | Indicates the packet as a request or a response. |
| 7bit           | Namespace Collision Resolution  | Used to resolve namespace collisions when multiple namespaces have similarly named RPCs. |
| 1b             | Data Length                     | The length of data to come including the RPC. |
| 1b             | Header Checksum                 | The checksum to determine the validity of the packet.|
| 4b             | RPC                             | The Bowler RPC call identifier. |
| 0b to 251b     | Packet Data					   | The rest of the data, Arguments or return values. |

### DEVICE ID ###

The bowler address is a globally unique address across all bowler devices. Now two devices should have the same 6 byte address. This field contains the address of the Device that is being communicated with.

One address out of all the possible addresses is treated differently. This address is the Link Local Address. It consists of all zeros (00:00:00:00:00:00) and any bowler device will respond to it.

### Packet Type ###

A packet can either be Asynchronous (spontaneous device to host) or Synchronous (a host initiated request or a response to one).

This is further divided into State Changing and non State Changing. State changing packets will cause the device to do something, to change it's state. For Example, setting a pin state would be state changing but querying it's state wouldn't be.

Also, there are two levels of priority (low and high)

 * POST(`0x20`)		Synchronous, Device State Changing
 * GET(`0x10`) 		Synchronous, query for information, non state changing
 * STATUS(`0x00`) 	Synchronous, High priority non state changing
 * CRITICAL(`0x30`) Synchronous, High Priority State Changing
 * ASYNC(`0x40`) 	Asynchronous, high priority, state changing.

### Direction Flag ###

Packets travel along a bidirectional link between a Host and a Device. The Direction flag specifies the direction the packet is traveling. a value of 0 indicates a packet is traveling from Host to Device. Likewise, A value of 1 indicates Device to host.

### Collision Resolution Number ###

In the event that a bowler device implements two name-spaces with identical RPCs, The device will return an error packet if this field is left zero. To resolve this collision, the host must supply the index of the desired namespace. This index is the same as the index used in bcs.core._nms

### Sources and Examples ###

The code can be found on our company github page in the c-bowler and java-bowler projects. 
            </div>
        </div>
    </div> <!-- row -->
  </div> <!-- container bs-docs-container -->
<!--  
<footer class="bs-docs-footer" role="contentinfo">
  <div class="container">
  Woo! Footer!
  </div>
</footer>
-->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<script src="/assets/jquery.min.js"></script>
	<!-- Latest compiled and minified JavaScript -->
	<script src="/assets/bootstrap.min.js"></script>

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/assets/js/ie10-viewport-bug-workaround.js"></script>
    <script src="/assets/holder.js"></script>
    <script src="/assets/offcanvas.js"></script>
  </body>
</html>



